<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snake Game</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Snake Game</h1>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <script src="snake.js"></script>
</body>
</html>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const gridSize = 20;
let snake = [{x: 8, y: 10}];
let direction = 'right';
let food = {x: 5, y: 5};
let gameOver = false;

function draw() {
  ctx.fillStyle = '#222';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#0f0';
  for(const part of snake) {
    ctx.fillRect(part.x * gridSize, part.y * gridSize, gridSize-2, gridSize-2);
  }
  ctx.fillStyle = 'red';
  ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize-2, gridSize-2);
}

function moveSnake() {
  const head = {...snake[0]};
  if(direction === 'right') head.x++;
  if(direction === 'left') head.x--;
  if(direction === 'up') head.y--;
  if(direction === 'down') head.y++;
  if(head.x < 0 || head.x >= canvas.width / gridSize ||
     head.y < 0 || head.y >= canvas.height / gridSize) {
    gameOver = true;
    return;
  }
  for(const part of snake) {
    if(part.x === head.x && part.y === head.y) {
      gameOver = true;
      return;
    }
  }
  snake.unshift(head);
  if(head.x === food.x && head.y === food.y) {
    placeFood();
  } else {
    snake.pop();
  }
}

function placeFood() {
  food = {
    x: Math.floor(Math.random() * (canvas.width / gridSize)),
    y: Math.floor(Math.random() * (canvas.height / gridSize))
  };
  for(const part of snake) {
    if(part.x === food.x && part.y === food.y) {
      placeFood();
    }
  }
}

document.addEventListener('keydown', e => {
  if(e.key === 'ArrowUp' && direction !== 'down') direction = 'up';
  if(e.key === 'ArrowDown' && direction !== 'up') direction = 'down';
  if(e.key === 'ArrowLeft' && direction !== 'right') direction = 'left';
  if(e.key === 'ArrowRight' && direction !== 'left') direction = 'right';
});

function loop() {
  if(gameOver) {
    alert('Game over!');
    window.location.reload();
    return;
  }
  moveSnake();
  draw();
  setTimeout(loop, 100);
}
draw();
loop();
